<!doctype html>
<html lang="en">
<head>
 <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TGWN5LC8');</script>
<!-- End Google Tag Manager -->

  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EL8KYP4VYE"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EL8KYP4VYE');
</script>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Shoply — Product</title>
<style>
  :root{--bg:#f7fbff;--card:#fff;--accent:#4f46e5;--muted:#6b7280}
  *{box-sizing:border-box} body{margin:0;font-family:Inter,system-ui,Arial;background:var(--bg);color:#071029}
  header{display:flex;justify-content:space-between;align-items:center;padding:12px 20px;background:linear-gradient(90deg,#ffffffcc,#f0f9ffcc)}
  main{max-width:1100px;margin:20px auto;padding:0 16px;display:grid;grid-template-columns:460px 1fr;gap:20px}
  @media(max-width:900px){main{grid-template-columns:1fr}}
  .gallery img{width:100%;height:420px;object-fit:cover;border-radius:10px}
  .thumbs{display:flex;gap:8px;margin-top:8px}
  .thumbs img{width:72px;height:72px;object-fit:cover;border-radius:8px;cursor:pointer}
  .card{background:var(--card);padding:16px;border-radius:12px;box-shadow:0 8px 20px rgba(12,16,30,0.04)}
  .price{font-size:22px;color:var(--accent);font-weight:700}
  .btn{background:var(--accent);color:white;padding:10px 14px;border-radius:10px;text-decoration:none}
</style>
</head>
  
<body>
  <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TGWN5LC8"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<header>
  <div><a href="products.html" style="text-decoration:none;color:var(--accent)">← Back to products</a></div>
  <div><a href="cart.html" class="btn" style="background:transparent;border:1px solid #eef6ff;color:var(--accent)">Cart</a></div>
</header>

<main id="main">
  <!-- JS populates -->
</main>

<script>
const products = JSON.parse(localStorage.getItem('shoply_products')||'[]');
const params = new URLSearchParams(location.search);
const id = Number(params.get('id'));
const p = products.find(x=>x.id===id) || products[0];

function renderProduct(product){
  document.title = product.title + ' — Shoply';
  const main = document.getElementById('main');
  main.innerHTML = `
    <div>
      <div class="card gallery">
        <img id="mainImg" src="${product.img}" alt="${product.title}">
        <div class="thumbs">
          <img src="${product.img}" onclick="swap(this.src)">
          <img src="https://images.unsplash.com/photo-1518444025576-3f4173b1e182?q=80&w=600&auto=format&fit=crop" onclick="swap(this.src)">
          <img src="https://images.unsplash.com/photo-1517336714731-489689fd1ca8?q=80&w=600&auto=format&fit=crop" onclick="swap(this.src)">
        </div>
      </div>
    </div>
    <div>
      <div class="card">
        <h2 style="margin:0">${product.title}</h2>
        <div style="display:flex;justify-content:space-between;align-items:center;margin-top:10px">
          <div class="price">₹${product.price}</div>
          <div style="color:var(--muted)">Category: ${product.cat}</div>
        </div>
        <p style="color:var(--muted);margin-top:12px">High quality product. Free delivery available. 7-day easy returns.</p>
        <div style="display:flex;gap:8px;margin-top:16px">
          <button class="btn" onclick="addToCart(${product.id})">Add to cart</button>
          <a class="btn" style="background:#10b981" href="cart.html">Buy now</a>
        </div>
        <hr style="margin:16px 0;border:none;border-top:1px solid #f0f6ff">
        <h4 style="margin:0">Product details</h4>
        <ul style="color:var(--muted)">
          <li>Material: Premium</li>
          <li>Warranty: 6 months</li>
          <li>Ships within 2-4 business days</li>
        </ul>
      </div>
    </div>
  `;
}
function swap(src){ document.getElementById('mainImg').src = src; }
function addToCart(id){
  const cart = JSON.parse(localStorage.getItem('shoply_cart')||'[]');
  const p = products.find(x=>x.id===id);
  const existing = cart.find(c=>c.id===id);
  if(existing) existing.qty++;
  else cart.push({id:p.id,title:p.title,price:p.price,img:p.img,qty:1});
  localStorage.setItem('shoply_cart',JSON.stringify(cart));
  alert('Added to cart: ' + p.title);
}
renderProduct(p);
</script>
</body>
</html>
